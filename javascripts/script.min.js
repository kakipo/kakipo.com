$(document).ready(function(){function k(){var h=$(window).width(),j=$(window).height();$("#myCanvas").attr("width",h);$("#myCanvas").attr("height",j)}function l(){function h(a){for(var b=0;b<a.rows;b++)for(var n=a.cells[b],c=0;c<a.cols;c++){var e=n[c],f=a.cells[0>b-1?a.rows-1:b-1][0>c-1?a.cols-1:c-1].status+a.cells[0>b-1?a.rows-1:b-1][c].status+a.cells[0>b-1?a.rows-1:b-1][c+1>=a.cols?0:c+1].status+a.cells[b][0>c-1?a.cols-1:c-1].status+a.cells[b][c+1>=a.cols?0:c+1].status+a.cells[b+1>=a.rows?0:b+1][0>
c-1?a.cols-1:c-1].status+a.cells[b+1>=a.rows?0:b+1][c].status+a.cells[b+1>=a.rows?0:b+1][c+1>=a.cols?0:c+1].status;1==e.status?1>=f?e.nextStatus=0:4<=f&&(e.nextStatus=0):3==f&&(e.nextStatus=1);0==e.nextStatus?e.extPeriod++:e.extPeriod=0;80<e.extPeriod&&0==e.nextStatus&&(e.color="#"+(parseInt(e.color.substring(1),16)%4096+10).toString(16),e.nextStatus=Math.round(Math.random()-0.49999))}}function j(a){for(var b=0;b<a.rows;b++)for(var n=a.cells[b],c=b*a.cell_size,e=0;e<a.cols;e++){var f=e*a.cell_size,
d=n[e];1==d.nextStatus?(p.fillStyle=d.color,p.fillRect(f,c,a.cell_size,a.cell_size)):p.clearRect(f,c,a.cell_size,a.cell_size);d.status=d.nextStatus}}function k(a,b,d,c){this.x=a;this.y=b;this.color=d;this.nextStatus=this.status=c;this.extPeriod=0}var g=document.getElementById("myCanvas"),m=g.getAttribute("width"),l=g.getAttribute("height");if(!g||!g.getContext)return!1;var p=g.getContext("2d"),d=new function(a,b,d){this.x=a;this.y=b;this.cell_size=d;b=Math.floor(b/d);a=Math.floor(a/d);this.rows=b;
this.cols=a;d=Array(b);for(var c=0;c<b;c++){for(var e=Array(a),f=0;f<a;f++){var g=Math.round(Math.random());e[f]=new k(c,f,"#aaa",g)}d[c]=e}this.cells=d}(m,l,10);h(d);j(d);m=navigator.userAgent;-1!=m.search(/iPhone/)||-1!=m.search(/iPad/)?(g.ontouchstart=function(a){a.preventDefault();h(d);j(d)},g.ontouchmove=function(a){a.preventDefault();h(d);j(d)},g.ontouchend=function(a){a.preventDefault();h(d);j(d)}):g.onmousemove=function(){h(d);j(d)}}k();l();$(window).bind("resize",function(){k();l()})});